# Documentação Semanal - Semanas 04 - 07

## Período
**Data de Início**: 21-10-2024  
**Data de Término**: 17-11-2024  

## Objetivos do Período
- Estudar e reutilizar uma aplicação que explore de forma avançada o uso de Thing Descriptions (TD), criada pelo último colaborador do projeto da IC. Guilherme Lee desenvolveu um sistema detalhado de descrições de Things. Durante esse período, reproduzi um código em MicroPython semelhante ao que Guilherme desenvolveu para Arduino em C++.

## Atividades Realizadas
### Atividade 1: Criação de um programa em MicroPython utilizando mDNS
- **Link do Repositório**: [Testes em MicroPython](https://github.com/AdryelliReiz/PUBDocumentation/blob/main/test_tdd/thing/main.py)
- **Descrição Detalhada**: A partir do código da Thing do Guilherme, desenvolvi um programa em MicroPython usando lógica similar para criar um ambiente inicial no ESP32 voltado à pesquisa. Por sugestão do professor, utilizei a biblioteca [micropython-mdns](https://github.com/cbrand/micropython-mdns), que permite a descoberta de serviços anunciados na rede.

### Atividade 2: Problema de conexão com Wi-Fi
- **Link da Issue**: [Issue #1](https://github.com/AdryelliReiz/PUBDocumentation/issues/1)  
- **Descrição Detalhada**: Um problema inicial impedia o ESP32 de conectar à rede Wi-Fi. O professor identificou ajustes necessários nos imports de `MDNS` e `microdot`. Após as correções, o código passou a funcionar adequadamente.

### Atividade 3: Problema com o mDNS para anunciar um serviço na rede
- **Link da Issue**: [Issue #2](https://github.com/AdryelliReiz/PUBDocumentation/issues/2)  
- **Descrição Detalhada**: O serviço `esp32.local`, anunciado via mDNS, não estava acessível. Para resolver, foi adicionado um trecho de código específico para garantir o anúncio correto do serviço. Detalhes adicionais estão na issue mencionada.

### Atividade 4: Desenvolvimento e adaptação de testes
- **Link do Repositório**: [Testes em MicroPython](https://github.com/AdryelliReiz/PUBDocumentation/tree/main/test_tdd/thing)  
- **Descrição Detalhada**: Foram criados dois arquivos de teste:  
  - Um simula a lógica principal da aplicação, mas em um ambiente desktop para validações locais.  
  - Outro expande o primeiro programa ao incluir a leitura de um sensor de luminosidade, que publica seu valor como parte da Thing Description.

## Desafios e Problemas Encontrados
- **Bibliotecas de MicroPython**: Algumas bibliotecas consumiam mais memória do que o ESP32 suportava, exigindo ajustes para otimizar o código.  
- **Configuração de mDNS**: Garantir que o nome `esp32.local` fosse corretamente propagado na rede envolveu diversas iterações de testes e ajustes.  
- **Remoção do Serviço pelo mDNS**: Durante os testes, o serviço parecia ser removido e readicionado ao diretório de Things com frequência. Ainda não determinei a causa, mas pode estar relacionada à rede ou ao comportamento interno do programa.

## Aprendizados e Observações
- **Novo Conhecimento**: Aprofundei meu entendimento sobre mDNS e o uso avançado de Thing Descriptions alinhadas ao padrão W3C WoT.  
- **Observações Importantes**: O diretório de Things mantém um registro mesmo após as Things serem desconectadas, o que poderá ser analisado para avaliar sua utilidade em cenários futuros.

## Próximos Passos
1. Incluir `td:Affordances` no registro da Thing para alinhar a TD com a ontologia SOSA/SSN.  
2. Validar o comportamento do diretório de Things em diferentes cenários de conexão e desconexão.  
3. Melhorar o suporte a Thing Descriptions para incluir ações e eventos interativos.  
4. Avaliar a integração do mDNS com protocolos como HTTP, CoAP e MQTT para ampliar funcionalidades.  

---

> **Nota**: Este documento é parte de uma série semanal que registra o progresso no projeto de Iniciação Científica sobre Web of Things.  